# Student Attendance ERP System

A comprehensive web-based attendance management system built with Flask and MySQL, deployed on Render with Aiven MySQL database.

## Features

### Admin Dashboard
- Manage teachers (Add, View, Delete)
- Manage students (Add, View, Delete)
- View system statistics
- Generate attendance reports by teacher

### Teacher Dashboard
- Mark attendance (Theory/Practical/Tutorial sessions)
- View attendance records
- Student-wise attendance summary with percentages
- Update/Delete attendance records

### Student Dashboard
- View personal attendance history
- Session-wise attendance breakdown (Theory/Practical/Tutorial)
- Overall attendance percentage

## Tech Stack

- **Backend:** Flask (Python)
- **Database:** MySQL (Aiven Cloud)
- **Deployment:** Render
- **Authentication:** Session-based with password hashing (PBKDF2)
- **Frontend:** HTML, CSS, Jinja2 templates

## Live Demo

ðŸ”— **Application URL:** [Your Render URL]

## Default Login Credentials

**Admin:**
- Username: `admin`
- Password: `admin123`

**Note:** Change the default password after first login. Add teachers and students through the admin panel.

## Local Development Setup

### Prerequisites

- Python 3.11 or higher
- pip (Python package manager)
- Git

### Installation Steps

1. **Clone the repository**
```bash
git clone https://github.com/vivekpunde05/Student_Attendance_ERP.git
cd Student_Attendance_ERP
```

2. **Create virtual environment (optional but recommended)**
```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate
```

3. **Install dependencies**
```bash
pip install -r requirements.txt
```

4. **Configure environment variables**

Create a `.env` file in the root directory:
```env
DB_HOST=your_aiven_mysql_host
DB_USER=avnadmin
DB_PASSWORD=your_aiven_password
DB_NAME=defaultdb
DB_PORT=12087
SECRET_KEY=your-secret-key-here
```

5. **Test database connection**
```bash
python test_connection.py
```

6. **Run the application**
```bash
python app.py
```

The application will be available at `http://localhost:5000`

## Deployment on Render

### Automatic Deployment

This project includes `render.yaml` for automatic deployment:

1. **Fork/Clone this repository**
2. **Sign up on Render:** https://render.com
3. **Create New Web Service:**
   - Connect your GitHub repository
   - Render will auto-detect `render.yaml`
4. **Set Environment Variables:**
   - `DB_HOST`: Your Aiven MySQL host
   - `DB_USER`: avnadmin
   - `DB_PASSWORD`: Your Aiven password
   - `DB_NAME`: defaultdb
   - `DB_PORT`: 12087
   - `SECRET_KEY`: (Auto-generated by Render)
5. **Deploy!**

### Aiven MySQL Setup

1. Sign up at https://console.aiven.io/
2. Create a new MySQL service
3. Copy connection details (host, port, user, password)
4. Use these credentials in your `.env` or Render environment variables

## Project Structure

```
Student_Attendance_ERP/
â”œâ”€â”€ app.py                    # Main Flask application
â”œâ”€â”€ config.py                 # Database configuration with dotenv
â”œâ”€â”€ connection.py             # MySQL connection pool management
â”œâ”€â”€ database.py               # Database schema and initialization
â”œâ”€â”€ utils.py                  # Utility functions (password hashing, date/time)
â”œâ”€â”€ admin.py                  # Admin module functions
â”œâ”€â”€ teacher.py                # Teacher module functions
â”œâ”€â”€ student.py                # Student module functions
â”œâ”€â”€ csv_handler.py            # CSV import/export functionality
â”œâ”€â”€ requirements.txt          # Python dependencies
â”œâ”€â”€ render.yaml               # Render deployment configuration
â”œâ”€â”€ build.sh                  # Build script for Render
â”œâ”€â”€ test_connection.py        # Database connection test script
â”œâ”€â”€ .env.example              # Environment variables template
â”œâ”€â”€ .gitignore                # Git ignore file
â”œâ”€â”€ README.md                 # This file
â”œâ”€â”€ templates/                # HTML templates
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ login.html
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”œâ”€â”€ dashboard.html
â”‚   â”‚   â”œâ”€â”€ teachers.html
â”‚   â”‚   â”œâ”€â”€ students.html
â”‚   â”‚   â””â”€â”€ reports.html
â”‚   â”œâ”€â”€ teacher/
â”‚   â”‚   â”œâ”€â”€ dashboard.html
â”‚   â”‚   â”œâ”€â”€ mark_attendance.html
â”‚   â”‚   â”œâ”€â”€ view_attendance.html
â”‚   â”‚   â””â”€â”€ summary.html
â”‚   â””â”€â”€ student/
â”‚       â””â”€â”€ dashboard.html
â””â”€â”€ static/                   # CSS, JS, images
    â””â”€â”€ style.css
```

## Database Schema

### Tables

**admins**
- id (Primary Key)
- username (Unique)
- password_hash
- full_name
- created_at

**teachers**
- id (Primary Key)
- username (Unique)
- password_hash
- full_name
- email
- subject_assigned
- created_at

**students**
- id (Primary Key)
- serial_no
- prn (Unique)
- name
- created_at

**attendance**
- id (Primary Key)
- student_id (Foreign Key â†’ students)
- teacher_id (Foreign Key â†’ teachers)
- subject
- date
- time
- session_type (theory/practical/tutorial)
- status (present/absent)
- recorded_at

## Usage Guide

### Admin Workflow

1. **Login** with admin credentials
2. **Add Teachers:**
   - Navigate to "Teachers" section
   - Click "Add Teacher"
   - Fill in username, password, full name, email, and subject
3. **Add Students:**
   - Navigate to "Students" section
   - Click "Add Student"
   - Enter Serial No, PRN, and Name
4. **View Reports:**
   - Go to "Reports" section
   - Select a teacher from dropdown
   - View comprehensive attendance summary

### Teacher Workflow

1. **Login** with teacher credentials
2. **Mark Attendance:**
   - Go to "Mark Attendance"
   - Select session type (Theory/Practical/Tutorial)
   - Mark Present/Absent for each student
   - Submit the form
3. **View Records:**
   - Navigate to "View Attendance"
   - See all attendance records with date/time
   - Delete incorrect records if needed
4. **Check Summary:**
   - Go to "Summary"
   - View detailed breakdown by session type
   - See attendance percentages for each student

### Student Workflow

1. **Login** with PRN number (no password required)
2. **View Dashboard:**
   - See attendance history
   - Check session-wise statistics
   - Monitor overall attendance percentage

## API Endpoints

### Authentication
- `GET /` - Redirect to appropriate dashboard
- `GET/POST /login` - Login page
- `GET /logout` - Logout and clear session

### Admin Routes
- `GET /admin/dashboard` - Admin dashboard with statistics
- `GET /admin/teachers` - List all teachers
- `POST /admin/teachers/add` - Add new teacher
- `GET /admin/teachers/delete/<id>` - Delete teacher
- `GET /admin/students` - List all students
- `POST /admin/students/add` - Add new student
- `GET /admin/students/delete/<id>` - Delete student
- `GET /admin/reports` - Attendance reports

### Teacher Routes
- `GET /teacher/dashboard` - Teacher dashboard
- `GET/POST /teacher/mark-attendance` - Mark attendance
- `GET /teacher/view-attendance` - View attendance records
- `GET /teacher/attendance/delete/<id>` - Delete attendance record
- `GET /teacher/summary` - Student attendance summary

### Student Routes
- `GET /student/dashboard` - Student dashboard with attendance

## Security Features

- Password hashing using PBKDF2-HMAC-SHA256
- Session-based authentication
- Role-based access control (Admin/Teacher/Student)
- SSL/TLS encryption for database connections
- Environment variables for sensitive data
- CSRF protection via Flask sessions

## Troubleshooting

### Database Connection Error

**Issue:** Can't connect to Aiven MySQL
**Solution:**
1. Verify credentials in `.env` file
2. Check if Aiven service is running
3. Ensure SSL is properly configured
4. Run `python test_connection.py` to diagnose

### Module Not Found Error

```bash
pip install --upgrade -r requirements.txt
```

### Port Already in Use (Local Development)

Change the port in `app.py`:
```python
app.run(debug=True, host='0.0.0.0', port=5001)
```

### Render Deployment Issues

1. Check Render logs for errors
2. Verify all environment variables are set
3. Ensure `build.sh` has execute permissions
4. Check database connectivity from Render

## Environment Variables

| Variable | Description | Example |
|----------|-------------|---------|
| `DB_HOST` | Aiven MySQL host | `vivekpunde-vivekpunde.h.aivencloud.com` |
| `DB_USER` | Database user | `avnadmin` |
| `DB_PASSWORD` | Database password | `your_password` |
| `DB_NAME` | Database name | `defaultdb` |
| `DB_PORT` | Database port | `12087` |
| `SECRET_KEY` | Flask secret key | `random-secret-string` |

## Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## License

This project is for educational purposes.

## Author

**Vivek Punde**
- GitHub: [@vivekpunde05](https://github.com/vivekpunde05)

## Acknowledgments

- Flask documentation
- Aiven for cloud database hosting
- Render for deployment platform
